<div class="container well">
  <p>
    <strong>League:</strong>
    <%= @game.dg_league.name %>
  </p>
  <p>
    <strong>Date:</strong>
    <%= @game.start_date.strftime("%B %d, %Y") %>
  </p>


</div>
<% if current_user %>
  <div class="container well">
    <%= render 'scores/add_score' %>
  </div>
  <div class="container well">
    <%= render 'ctps/add_ctp' %>
  </div>
<% end %>

<div class="container well">
  <h3> CTP Results</h3>
  <table class="table">
    <thead>
      <tr>
        <th class = "col-xs-2">Hole</th>
        <th class = "col-xs-8">Player</th>
        <th class = "col-xs-1"></th>
        <th class = "col-xs-1"></th>
      </tr>
    </thead>

    <tbody>
      <% @game.ctps.sort {|a,b| a.hole <=> b.hole}.each do |ctp| %>
        <tr>
          <td class = "col-xs-3"><%= ctp.hole %></td>
          <td class = "col-xs-3"><%= link_to ctp.player.name, ctp.player %></td>
          <% if current_user %>
          <td class="col-xs-1"><%= link_to icon('pencil'), edit_ctp_path(ctp), class: "btn btn-info" %></td>
          <td class="col-xs-1"><%= link_to icon('trash-o') , ctp, method: :delete, data: { confirm: 'Are you sure you want to delete this score?' },  class: "btn btn-danger" %></td>
        <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<div class="container well">
  <h3> Player Results</h3>
  <table class="table">
    <thead>
      <tr>
        <th class = "col-xs-4">Name</th>
        <th class = "col-xs-2">Score</th>
        <th class = "col-xs-2">Handicap</th>
        <th class = "col-xs-2">Scratch </th>
        <th class = "col-xs-1"></th>
        <th class = "col-xs-1"></th>
      </tr>
    </thead>

    <tbody>
      <% @game.scores.sort {|a,b| a.adjusted_score <=> b.adjusted_score}.each do |score| %>
        <tr>
          <td class = "col-xs-3"><%= link_to score.player.name, score.player %></td>
          <td class = "col-xs-3"><%= score.adjusted_score %></td>
          <td class = "col-xs-3"><%= score.player.calc_handicap(@game.start_date, @game.dg_league_id) %></td>
          <td class = "col-xs-3"><%= score.value %></td>
          <% if current_user %>
          <td class="col-xs-1"><%= link_to icon('pencil'), edit_score_path(score), class: "btn btn-info" %></td>
          <td class="col-xs-1"><%= link_to icon('trash-o') , score, method: :delete, data: { confirm: 'Are you sure you want to delete this score?' },  class: "btn btn-danger" %></td>
        <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>



